<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Module: Mongoid::Tree
  
    &mdash; Documentation by YARD 0.8.7.4
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  hasFrames = window.top.frames.main ? true : false;
  relpath = '../';
  framesUrl = "../frames.html#!Mongoid/Tree.html";
</script>


  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <div id="header">
      <div id="menu">
  
    <a href="../_index.html">Index (T)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../Mongoid.html" title="Mongoid (module)">Mongoid</a></span></span>
     &raquo; 
    <span class="title">Tree</span>
  

  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../class_list.html">
      Class List
    </a>
  
    <a class="full_list_link" id="method_list_link"
        href="../method_list.html">
      Method List
    </a>
  
    <a class="full_list_link" id="file_list_link"
        href="../file_list.html">
      File List
    </a>
  
</div>
      <div class="clear"></div>
    </div>

    <iframe id="search_frame"></iframe>

    <div id="content"><h1>Module: Mongoid::Tree
  
  
  
</h1>

<dl class="box">
  
  
    
      <dt class="r1">Extended by:</dt>
      <dd class="r1">ActiveSupport::Concern</dd>
      
    
  
    
  
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">lib/mongoid/tree.rb<span class="defines">,<br />
  lib/mongoid/tree/ordering.rb,<br /> lib/mongoid/tree/traversal.rb</span>
</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<h1 id="label-Mongoid%3A%3ATree">Mongoid::Tree</h1>

<p>This module extends any Mongoid document with tree functionality.</p>

<h2 id="label-Usage">Usage</h2>

<p>Simply include the module in any Mongoid document:</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>class</span> <span class='const'>Node</span>
  <span class='id identifier rubyid_include'>include</span> <span class='const'>Mongoid</span><span class='op'>::</span><span class='const'>Document</span>
  <span class='id identifier rubyid_include'>include</span> <span class='const'>Mongoid</span><span class='op'>::</span><span class='const'>Tree</span>
<span class='kw'>end</span>
</code></pre>

<h3 id="label-Using+the+tree+structure">Using the tree structure</h3>

<p>Each document references many children. You can access them using the
<code>#children</code> method.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_node'>node</span> <span class='op'>=</span> <span class='const'>Node</span><span class='period'>.</span><span class='id identifier rubyid_create'>create</span>
<span class='id identifier rubyid_node'>node</span><span class='period'>.</span><span class='id identifier rubyid_children'>children</span><span class='period'>.</span><span class='id identifier rubyid_create'>create</span>
<span class='id identifier rubyid_node'>node</span><span class='period'>.</span><span class='id identifier rubyid_children'>children</span><span class='period'>.</span><span class='id identifier rubyid_count'>count</span> <span class='comment'># =&gt; 1
</span></code></pre>

<p>Every document references one parent (unless it&#39;s a root document).</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_node'>node</span> <span class='op'>=</span> <span class='const'>Node</span><span class='period'>.</span><span class='id identifier rubyid_create'>create</span>
<span class='id identifier rubyid_node'>node</span><span class='period'>.</span><span class='id identifier rubyid_parent'>parent</span> <span class='comment'># =&gt; nil
</span><span class='id identifier rubyid_node'>node</span><span class='period'>.</span><span class='id identifier rubyid_children'>children</span><span class='period'>.</span><span class='id identifier rubyid_create'>create</span>
<span class='id identifier rubyid_node'>node</span><span class='period'>.</span><span class='id identifier rubyid_children'>children</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span><span class='period'>.</span><span class='id identifier rubyid_parent'>parent</span> <span class='comment'># =&gt; node
</span></code></pre>

<h3 id="label-Destroying">Destroying</h3>

<p>Mongoid::Tree does not handle destroying of nodes by default. However it
provides several strategies that help you to deal with children of deleted
documents. You can simply add them as <code>before_destroy</code>
callbacks.</p>

<p>Available strategies are:</p>
<ul><li>
<p>:nullify_children – Sets the children&#39;s parent_id to null</p>
</li><li>
<p>:move_children_to_parent – Moves the children to the current document&#39;s
parent</p>
</li><li>
<p>:destroy_children – Destroys all children by calling their #destroy method
(invokes callbacks)</p>
</li><li>
<p>:delete_descendants – Deletes all descendants using a database query
(doesn&#39;t invoke callbacks)</p>
</li></ul>

<p>Example:</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>class</span> <span class='const'>Node</span>
  <span class='id identifier rubyid_include'>include</span> <span class='const'>Mongoid</span><span class='op'>::</span><span class='const'>Document</span>
  <span class='id identifier rubyid_include'>include</span> <span class='const'>Mongoid</span><span class='op'>::</span><span class='const'>Tree</span>

  <span class='id identifier rubyid_before_destroy'>before_destroy</span> <span class='symbol'>:nullify_children</span>
<span class='kw'>end</span>
</code></pre>

<h3 id="label-Callbacks">Callbacks</h3>

<p>Mongoid::Tree offers callbacks for its rearranging process. This enables
you to rebuild certain fields when the document was moved in the tree.
Rearranging happens before the document is validated. This gives you a
chance to validate your additional changes done in your callbacks. See
ActiveModel::Callbacks and ActiveSupport::Callbacks for further details on
callbacks.</p>

<p>Example:</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>class</span> <span class='const'>Page</span>
  <span class='id identifier rubyid_include'>include</span> <span class='const'>Mongoid</span><span class='op'>::</span><span class='const'>Document</span>
  <span class='id identifier rubyid_include'>include</span> <span class='const'>Mongoid</span><span class='op'>::</span><span class='const'>Tree</span>

  <span class='id identifier rubyid_after_rearrange'>after_rearrange</span> <span class='symbol'>:rebuild_path</span>

  <span class='id identifier rubyid_field'>field</span> <span class='symbol'>:slug</span>
  <span class='id identifier rubyid_field'>field</span> <span class='symbol'>:path</span>

  <span class='id identifier rubyid_private'>private</span>

  <span class='kw'>def</span> <span class='id identifier rubyid_rebuild_path'>rebuild_path</span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_path'>path</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_ancestors_and_self'>ancestors_and_self</span><span class='period'>.</span><span class='id identifier rubyid_collect'>collect</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:slug</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</code></pre>


  </div>
</div>
<div class="tags">
  

</div><h2>Defined Under Namespace</h2>
<p class="children">
  
    
      <strong class="modules">Modules:</strong> <span class='object_link'><a href="Tree/ClassMethods.html" title="Mongoid::Tree::ClassMethods (module)">ClassMethods</a></span>, <span class='object_link'><a href="Tree/Ordering.html" title="Mongoid::Tree::Ordering (module)">Ordering</a></span>, <span class='object_link'><a href="Tree/Traversal.html" title="Mongoid::Tree::Traversal (module)">Traversal</a></span>
    
  
    
  
</p>







  
    <h2>
      Class Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#after_rearrange-class_method" title="after_rearrange (class method)">+ (undefined) <strong>after_rearrange</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Sets a callback that is called after the document is rearranged.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#before_rearrange-class_method" title="before_rearrange (class method)">+ (undefined) <strong>before_rearrange</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Sets a callback that is called before the document is rearranged.</p>
</div></span>
  
</li>

      
    </ul>
  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#ancestor_of%3F-instance_method" title="#ancestor_of? (instance method)">- (Boolean) <strong>ancestor_of?</strong>(other) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Is this document an ancestor of the other document?.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#ancestors-instance_method" title="#ancestors (instance method)">- (Mongoid::Criteria) <strong>ancestors</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns a chainable criteria for this document&#39;s ancestors.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#ancestors_and_self-instance_method" title="#ancestors_and_self (instance method)">- (Array&lt;Mongoid::Document&gt;) <strong>ancestors_and_self</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns an array of this document&#39;s ancestors and itself.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#children-instance_method" title="#children (instance method)">- (Mongoid::Criteria) <strong>children</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns a list of the document&#39;s children.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#delete_descendants-instance_method" title="#delete_descendants (instance method)">- (undefined) <strong>delete_descendants</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Deletes all descendants using the database (doesn&#39;t invoke callbacks).</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#depth-instance_method" title="#depth (instance method)">- (Fixnum) <strong>depth</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the depth of this document (number of ancestors).</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#descendant_of%3F-instance_method" title="#descendant_of? (instance method)">- (Boolean) <strong>descendant_of?</strong>(other) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Is this document a descendant of the other document?.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#descendants-instance_method" title="#descendants (instance method)">- (Mongoid::Criteria) <strong>descendants</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns a chainable criteria for this document&#39;s descendants.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#descendants_and_self-instance_method" title="#descendants_and_self (instance method)">- (Array&lt;Mongoid::Document&gt;) <strong>descendants_and_self</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns and array of this document and it&#39;s descendants.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#destroy_children-instance_method" title="#destroy_children (instance method)">- (undefined) <strong>destroy_children</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Destroys all children by calling their #destroy method (does invoke
callbacks).</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#leaf%3F-instance_method" title="#leaf? (instance method)">- (Boolean) <strong>leaf?</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Is this document a leaf node (has no children)?.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#leaves-instance_method" title="#leaves (instance method)">- (Mongoid::Criteria) <strong>leaves</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns all leaves of this document (be careful, currently involves two
queries).</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#move_children_to_parent-instance_method" title="#move_children_to_parent (instance method)">- (undefined) <strong>move_children_to_parent</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Moves all children to this document&#39;s parent.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#nullify_children-instance_method" title="#nullify_children (instance method)">- (undefined) <strong>nullify_children</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Nullifies all children&#39;s parent_id.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#parent-instance_method" title="#parent (instance method)">- (Mongoid::Document) <strong>parent</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the document&#39;s parent (unless it&#39;s a root document).</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#parent%3D-instance_method" title="#parent= (instance method)">- (Object) <strong>parent=</strong>(document) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Sets this documents parent document.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#parent_ids-instance_method" title="#parent_ids (instance method)">- (Array&lt;BSON::ObjectId&gt;) <strong>parent_ids</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns a list of the document&#39;s parent_ids, starting with the root
node.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#rearrange_children%21-instance_method" title="#rearrange_children! (instance method)">- (undefined) <strong>rearrange_children!</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Forces rearranging of all children after next save.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#rearrange_children%3F-instance_method" title="#rearrange_children? (instance method)">- (Boolean) <strong>rearrange_children?</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Will the children be rearranged after next save?.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#root-instance_method" title="#root (instance method)">- (Mongoid::Document) <strong>root</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns this document&#39;s root node.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#root%3F-instance_method" title="#root? (instance method)">- (Boolean) <strong>root?</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Is this document a root node (has no parent)?.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#sibling_of%3F-instance_method" title="#sibling_of? (instance method)">- (Boolean) <strong>sibling_of?</strong>(other) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Is this document a sibling of the other document?.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#siblings-instance_method" title="#siblings (instance method)">- (Mongoid::Criteria) <strong>siblings</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns this document&#39;s siblings.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#siblings_and_self-instance_method" title="#siblings_and_self (instance method)">- (Mongoid::Criteria) <strong>siblings_and_self</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns this document&#39;s siblings and itself.</p>
</div></span>
  
</li>

      
    </ul>
  


  

  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="after_rearrange-class_method">
  
    + (<tt>undefined</tt>) <strong>after_rearrange</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'>
<p>Generated by ActiveSupport</p>
</div>
  </div>


<p>Sets a callback that is called after the document is rearranged</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='kw'>class</span> <span class='const'>Node</span>
  <span class='id identifier rubyid_include'>include</span> <span class='const'>Mongoid</span><span class='op'>::</span><span class='const'>Document</span>
  <span class='id identifier rubyid_include'>include</span> <span class='const'>Mongoid</span><span class='op'>::</span><span class='const'>Tree</span>

  <span class='id identifier rubyid_after_rearrange'>after_rearrange</span> <span class='symbol'>:do_something</span>

<span class='id identifier rubyid_private'>private</span>

  <span class='kw'>def</span> <span class='id identifier rubyid_do_something'>do_something</span>
    <span class='comment'># ...
</span>  <span class='kw'>end</span>
<span class='kw'>end</span></code></pre>
    
  </div>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>undefined</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongoid/tree.rb', line 174</span>

</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="before_rearrange-class_method">
  
    + (<tt>undefined</tt>) <strong>before_rearrange</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'>
<p>Generated by ActiveSupport</p>
</div>
  </div>


<p>Sets a callback that is called before the document is rearranged</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='kw'>class</span> <span class='const'>Node</span>
  <span class='id identifier rubyid_include'>include</span> <span class='const'>Mongoid</span><span class='op'>::</span><span class='const'>Document</span>
  <span class='id identifier rubyid_include'>include</span> <span class='const'>Mongoid</span><span class='op'>::</span><span class='const'>Tree</span>

  <span class='id identifier rubyid_before_rearrage'>before_rearrage</span> <span class='symbol'>:do_something</span>

<span class='id identifier rubyid_private'>private</span>

  <span class='kw'>def</span> <span class='id identifier rubyid_do_something'>do_something</span>
    <span class='comment'># ...
</span>  <span class='kw'>end</span>
<span class='kw'>end</span></code></pre>
    
  </div>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>undefined</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongoid/tree.rb', line 150</span>

</pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="ancestor_of?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>ancestor_of?</strong>(other) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Is this document an ancestor of the other document?</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>other</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="Mongoid::Tree (module)">Mongoid::Tree</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>document to check against</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The document is an ancestor of the other document</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


297
298
299</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongoid/tree.rb', line 297</span>

<span class='kw'>def</span> <span class='id identifier rubyid_ancestor_of?'>ancestor_of?</span><span class='lparen'>(</span><span class='id identifier rubyid_other'>other</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_other'>other</span><span class='period'>.</span><span class='id identifier rubyid_parent_ids'>parent_ids</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="ancestors-instance_method">
  
    - (<tt>Mongoid::Criteria</tt>) <strong>ancestors</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns a chainable criteria for this document&#39;s ancestors</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Mongoid::Criteria</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Mongoid criteria to retrieve the documents ancestors</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


279
280
281</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongoid/tree.rb', line 279</span>

<span class='kw'>def</span> <span class='id identifier rubyid_ancestors'>ancestors</span>
  <span class='id identifier rubyid_base_class'>base_class</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='symbol'>:_id</span><span class='period'>.</span><span class='id identifier rubyid_in'>in</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_parent_ids'>parent_ids</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_order'>order</span><span class='lparen'>(</span><span class='symbol'>:depth</span> <span class='op'>=&gt;</span> <span class='symbol'>:asc</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="ancestors_and_self-instance_method">
  
    - (<tt>Array&lt;Mongoid::Document&gt;</tt>) <strong>ancestors_and_self</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns an array of this document&#39;s ancestors and itself</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;Mongoid::Document&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Array of the document&#39;s ancestors and itself</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


287
288
289</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongoid/tree.rb', line 287</span>

<span class='kw'>def</span> <span class='id identifier rubyid_ancestors_and_self'>ancestors_and_self</span>
  <span class='id identifier rubyid_ancestors'>ancestors</span> <span class='op'>+</span> <span class='lbracket'>[</span><span class='kw'>self</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="children-instance_method">
  
    - (<tt>Mongoid::Criteria</tt>) <strong>children</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'>
<p>Generated by Mongoid</p>
</div>
  </div>


<p>Returns a list of the document&#39;s children. It&#39;s a
<code>references_many</code> association.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Mongoid::Criteria</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Mongoid criteria to retrieve the document&#39;s children</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongoid/tree.rb', line 198</span>

</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="delete_descendants-instance_method">
  
    - (<tt>undefined</tt>) <strong>delete_descendants</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Deletes all descendants using the database (doesn&#39;t invoke callbacks)</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>undefined</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


403
404
405</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongoid/tree.rb', line 403</span>

<span class='kw'>def</span> <span class='id identifier rubyid_delete_descendants'>delete_descendants</span>
  <span class='id identifier rubyid_base_class'>base_class</span><span class='period'>.</span><span class='id identifier rubyid_delete_all'>delete_all</span><span class='lparen'>(</span><span class='symbol'>:conditions</span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span> <span class='symbol'>:parent_ids</span> <span class='op'>=&gt;</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span> <span class='rbrace'>}</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="depth-instance_method">
  
    - (<tt>Fixnum</tt>) <strong>depth</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the depth of this document (number of ancestors)</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='const'>Node</span><span class='period'>.</span><span class='id identifier rubyid_root'>root</span><span class='period'>.</span><span class='id identifier rubyid_depth'>depth</span> <span class='comment'># =&gt; 0
</span><span class='const'>Node</span><span class='period'>.</span><span class='id identifier rubyid_root'>root</span><span class='period'>.</span><span class='id identifier rubyid_children'>children</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span><span class='period'>.</span><span class='id identifier rubyid_depth'>depth</span> <span class='comment'># =&gt; 1</span></code></pre>
    
  </div>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Fixnum</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Depth of this document</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


238
239
240</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongoid/tree.rb', line 238</span>

<span class='kw'>def</span> <span class='id identifier rubyid_depth'>depth</span>
  <span class='kw'>super</span> <span class='op'>||</span> <span class='id identifier rubyid_parent_ids'>parent_ids</span><span class='period'>.</span><span class='id identifier rubyid_count'>count</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="descendant_of?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>descendant_of?</strong>(other) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Is this document a descendant of the other document?</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>other</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="Mongoid::Tree (module)">Mongoid::Tree</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>document to check against</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The document is a descendant of the other document</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


323
324
325</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongoid/tree.rb', line 323</span>

<span class='kw'>def</span> <span class='id identifier rubyid_descendant_of?'>descendant_of?</span><span class='lparen'>(</span><span class='id identifier rubyid_other'>other</span><span class='rparen'>)</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_parent_ids'>parent_ids</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_other'>other</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="descendants-instance_method">
  
    - (<tt>Mongoid::Criteria</tt>) <strong>descendants</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns a chainable criteria for this document&#39;s descendants</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Mongoid::Criteria</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Mongoid criteria to retrieve the document&#39;s descendants</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


305
306
307</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongoid/tree.rb', line 305</span>

<span class='kw'>def</span> <span class='id identifier rubyid_descendants'>descendants</span>
  <span class='id identifier rubyid_base_class'>base_class</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='symbol'>:parent_ids</span> <span class='op'>=&gt;</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="descendants_and_self-instance_method">
  
    - (<tt>Array&lt;Mongoid::Document&gt;</tt>) <strong>descendants_and_self</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns and array of this document and it&#39;s descendants</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;Mongoid::Document&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Array of the document itself and it&#39;s descendants</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


313
314
315</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongoid/tree.rb', line 313</span>

<span class='kw'>def</span> <span class='id identifier rubyid_descendants_and_self'>descendants_and_self</span>
  <span class='lbracket'>[</span><span class='kw'>self</span><span class='rbracket'>]</span> <span class='op'>+</span> <span class='id identifier rubyid_descendants'>descendants</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="destroy_children-instance_method">
  
    - (<tt>undefined</tt>) <strong>destroy_children</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Destroys all children by calling their #destroy method (does invoke
callbacks)</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>undefined</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


411
412
413</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongoid/tree.rb', line 411</span>

<span class='kw'>def</span> <span class='id identifier rubyid_destroy_children'>destroy_children</span>
  <span class='id identifier rubyid_children'>children</span><span class='period'>.</span><span class='id identifier rubyid_destroy_all'>destroy_all</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="leaf?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>leaf?</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Is this document a leaf node (has no children)?</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Whether the document is a leaf node</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


254
255
256</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongoid/tree.rb', line 254</span>

<span class='kw'>def</span> <span class='id identifier rubyid_leaf?'>leaf?</span>
  <span class='id identifier rubyid_children'>children</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="leaves-instance_method">
  
    - (<tt>Mongoid::Criteria</tt>) <strong>leaves</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns all leaves of this document (be careful, currently involves two
queries)</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Mongoid::Criteria</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Mongoid criteria to retrieve the document&#39;s leaves</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


357
358
359</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongoid/tree.rb', line 357</span>

<span class='kw'>def</span> <span class='id identifier rubyid_leaves'>leaves</span>
  <span class='id identifier rubyid_base_class'>base_class</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='symbol'>:_id</span><span class='period'>.</span><span class='id identifier rubyid_nin'>nin</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_base_class'>base_class</span><span class='period'>.</span><span class='id identifier rubyid_only'>only</span><span class='lparen'>(</span><span class='symbol'>:parent_id</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_collect'>collect</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:parent_id</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_and'>and</span><span class='lparen'>(</span><span class='symbol'>:parent_ids</span> <span class='op'>=&gt;</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="move_children_to_parent-instance_method">
  
    - (<tt>undefined</tt>) <strong>move_children_to_parent</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Moves all children to this document&#39;s parent</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>undefined</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


392
393
394
395
396
397</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongoid/tree.rb', line 392</span>

<span class='kw'>def</span> <span class='id identifier rubyid_move_children_to_parent'>move_children_to_parent</span>
  <span class='id identifier rubyid_children'>children</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_c'>c</span><span class='op'>|</span>
    <span class='id identifier rubyid_c'>c</span><span class='period'>.</span><span class='id identifier rubyid_parent'>parent</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_parent'>parent</span>
    <span class='id identifier rubyid_c'>c</span><span class='period'>.</span><span class='id identifier rubyid_save'>save</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="nullify_children-instance_method">
  
    - (<tt>undefined</tt>) <strong>nullify_children</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Nullifies all children&#39;s parent_id</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>undefined</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


381
382
383
384
385
386</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongoid/tree.rb', line 381</span>

<span class='kw'>def</span> <span class='id identifier rubyid_nullify_children'>nullify_children</span>
  <span class='id identifier rubyid_children'>children</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_c'>c</span><span class='op'>|</span>
    <span class='id identifier rubyid_c'>c</span><span class='period'>.</span><span class='id identifier rubyid_parent'>parent</span> <span class='op'>=</span> <span class='id identifier rubyid_c'>c</span><span class='period'>.</span><span class='id identifier rubyid_parent_id'>parent_id</span> <span class='op'>=</span> <span class='kw'>nil</span>
    <span class='id identifier rubyid_c'>c</span><span class='period'>.</span><span class='id identifier rubyid_save'>save</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="parent-instance_method">
  
    - (<tt>Mongoid::Document</tt>) <strong>parent</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'>
<p>Generated by Mongoid</p>
</div>
  </div>


<p>Returns the document&#39;s parent (unless it&#39;s a root document). 
It&#39;s a <code>referenced_in</code> association.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Mongoid::Document</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The document&#39;s parent document</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongoid/tree.rb', line 206</span>

</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="parent=-instance_method">
  
    - (<tt>Object</tt>) <strong>parent=</strong>(document) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'>
<p>Generated by Mongoid</p>
</div>
  </div>


<p>Sets this documents parent document.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>document</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="Mongoid::Tree (module)">Mongoid::Tree</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongoid/tree.rb', line 214</span>

</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="parent_ids-instance_method">
  
    - (<tt>Array&lt;BSON::ObjectId&gt;</tt>) <strong>parent_ids</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'>
<p>Generated by Mongoid</p>
</div>
  </div>


<p>Returns a list of the document&#39;s parent_ids, starting with the root
node.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;BSON::ObjectId&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The ids of the document&#39;s ancestors</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongoid/tree.rb', line 222</span>

</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="rearrange_children!-instance_method">
  
    - (<tt>undefined</tt>) <strong>rearrange_children!</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Forces rearranging of all children after next save</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>undefined</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


365
366
367</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongoid/tree.rb', line 365</span>

<span class='kw'>def</span> <span class='id identifier rubyid_rearrange_children!'>rearrange_children!</span>
  <span class='ivar'>@rearrange_children</span> <span class='op'>=</span> <span class='kw'>true</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="rearrange_children?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>rearrange_children?</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Will the children be rearranged after next save?</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Whether the children will be rearranged</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


373
374
375</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongoid/tree.rb', line 373</span>

<span class='kw'>def</span> <span class='id identifier rubyid_rearrange_children?'>rearrange_children?</span>
  <span class='op'>!</span><span class='op'>!</span><span class='ivar'>@rearrange_children</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="root-instance_method">
  
    - (<tt>Mongoid::Document</tt>) <strong>root</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns this document&#39;s root node. Returns `self` if the current
document is a root node</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code>node = Node.find(...)
node.root</code></pre>
    
  </div>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Mongoid::Document</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The documents root node</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


267
268
269
270
271
272
273</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongoid/tree.rb', line 267</span>

<span class='kw'>def</span> <span class='id identifier rubyid_root'>root</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_parent_ids'>parent_ids</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>
    <span class='id identifier rubyid_base_class'>base_class</span><span class='period'>.</span><span class='id identifier rubyid_find'>find</span><span class='lparen'>(</span><span class='id identifier rubyid_parent_ids'>parent_ids</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_root?'>root?</span> <span class='op'>?</span> <span class='kw'>self</span> <span class='op'>:</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_parent'>parent</span><span class='period'>.</span><span class='id identifier rubyid_root'>root</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="root?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>root?</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Is this document a root node (has no parent)?</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Whether the document is a root node</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


246
247
248</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongoid/tree.rb', line 246</span>

<span class='kw'>def</span> <span class='id identifier rubyid_root?'>root?</span>
  <span class='id identifier rubyid_parent_id'>parent_id</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="sibling_of?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>sibling_of?</strong>(other) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Is this document a sibling of the other document?</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>other</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="Mongoid::Tree (module)">Mongoid::Tree</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>document to check against</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The document is a sibling of the other document</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


349
350
351</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongoid/tree.rb', line 349</span>

<span class='kw'>def</span> <span class='id identifier rubyid_sibling_of?'>sibling_of?</span><span class='lparen'>(</span><span class='id identifier rubyid_other'>other</span><span class='rparen'>)</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_parent_id'>parent_id</span> <span class='op'>==</span> <span class='id identifier rubyid_other'>other</span><span class='period'>.</span><span class='id identifier rubyid_parent_id'>parent_id</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="siblings-instance_method">
  
    - (<tt>Mongoid::Criteria</tt>) <strong>siblings</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns this document&#39;s siblings</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Mongoid::Criteria</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Mongoid criteria to retrieve the document&#39;s siblings</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


331
332
333</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongoid/tree.rb', line 331</span>

<span class='kw'>def</span> <span class='id identifier rubyid_siblings'>siblings</span>
  <span class='id identifier rubyid_siblings_and_self'>siblings_and_self</span><span class='period'>.</span><span class='id identifier rubyid_excludes'>excludes</span><span class='lparen'>(</span><span class='symbol'>:id</span> <span class='op'>=&gt;</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="siblings_and_self-instance_method">
  
    - (<tt>Mongoid::Criteria</tt>) <strong>siblings_and_self</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns this document&#39;s siblings and itself</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Mongoid::Criteria</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Mongoid criteria to retrieve the document&#39;s siblings and itself</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


339
340
341</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/mongoid/tree.rb', line 339</span>

<span class='kw'>def</span> <span class='id identifier rubyid_siblings_and_self'>siblings_and_self</span>
  <span class='id identifier rubyid_base_class'>base_class</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='symbol'>:parent_id</span> <span class='op'>=&gt;</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_parent_id'>parent_id</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

    <div id="footer">
  Generated on Fri Jun 27 11:10:17 2014 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.8.7.4 (ruby-2.0.0).
</div>

  </body>
</html>